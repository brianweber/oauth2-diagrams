<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1033px" preserveAspectRatio="none" style="width:1120px;height:1033px;background:#FFFFFF;" version="1.1" viewBox="0 0 1120 1033" width="1120px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="1021.1582" style="stroke:#181818;stroke-width:0.5;" width="653.5" x="238" y="6"/><rect fill="none" height="426.1203" style="stroke:#000000;stroke-width:1.5;" width="890.5" x="136.5" y="175.5479"/><rect fill="none" height="79.118" style="stroke:#000000;stroke-width:1.5;" width="890.5" x="136.5" y="687.0802"/><rect fill="none" height="114.8241" style="stroke:#000000;stroke-width:1.5;" width="1019" x="8" y="784.1983"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="152.5" x2="152.5" y1="108.1358" y2="923.0223"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="323.5" x2="323.5" y1="108.1358" y2="923.0223"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="501" x2="501" y1="108.1358" y2="923.0223"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="794.5" x2="794.5" y1="108.1358" y2="923.0223"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1011" x2="1011" y1="108.1358" y2="923.0223"/><rect fill="#E2E2F0" height="71.2038" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108" x="98.5" y="35.9321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="108.5" y="57.898">Relying Party</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="105.5" y="76.9659">(OAuth Client)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="120.5" y="96.0339">https://rp</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="242" y="55"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="249" y="76.9659">User Agent / Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="268" y="96.0339">for Relying Party</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="482.5" y="84.9659">User</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="415" y="104.0339">(OAuth Resource Owner)</text><ellipse cx="501" cy="18.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M501,26.5 L501,53.5 M488,34.5 L514,34.5 M501,53.5 L488,68.5 M501,53.5 L514,68.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="186" x="701.5" y="55"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172" x="708.5" y="76.9659">User Agent / Frontend for</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="738.5" y="96.0339">OpenID Provider</text><rect fill="#E2E2F0" height="71.2038" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="207" x="907.5" y="35.9321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="955" y="57.898">OpenID Provider</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193" x="914.5" y="76.9659">(OAuth Authorization Server)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="978" y="96.0339">https://op</text><rect fill="#E2E2F0" height="71.2038" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108" x="98.5" y="923.0223"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="108.5" y="944.9883">Relying Party</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="105.5" y="964.0562">(OAuth Client)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="120.5" y="983.1241">https://rp</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="242" y="923.0223"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="249" y="944.9883">User Agent / Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="268" y="964.0562">for Relying Party</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="482.5" y="997.9883">User</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="415" y="1017.0562">(OAuth Resource Owner)</text><ellipse cx="501" cy="931.5223" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M501,939.5223 L501,966.5223 M488,947.5223 L514,947.5223 M501,966.5223 L488,981.5223 M501,966.5223 L514,981.5223 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="186" x="701.5" y="923.0223"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172" x="708.5" y="944.9883">User Agent / Frontend for</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="738.5" y="964.0562">OpenID Provider</text><rect fill="#E2E2F0" height="71.2038" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="207" x="907.5" y="923.0223"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="955" y="944.9883">OpenID Provider</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193" x="914.5" y="964.0562">(OAuth Authorization Server)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="978" y="983.1241">https://op</text><path d="M741.25,121.1358 L741.25,166.1358 L1064.25,166.1358 L1064.25,131.1358 L1054.25,121.1358 L741.25,121.1358 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1054.25,121.1358 L1054.25,131.1358 L1064.25,131.1358 L1054.25,121.1358 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="747.25" y="140.0328">Relevant OP Metadata</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="302" x="747.25" y="157.7389">"end_session_endpoint": "https://op/end_session",</text><path d="M55,121.1358 L55,166.1358 L421,166.1358 L421,131.1358 L411,121.1358 L55,121.1358 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M411,121.1358 L411,131.1358 L421,131.1358 L411,121.1358 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="61" y="140.0328">Relevant RP Registration</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="345" x="61" y="157.7389">"post_logout_redirect_uris": ["https://client/post_logout"],</text><path d="M136.5,175.5479 L199.5,175.5479 L199.5,185.2539 L189.5,195.2539 L136.5,195.2539 L136.5,175.5479 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="426.1203" style="stroke:#000000;stroke-width:1.5;" width="890.5" x="136.5" y="175.5479"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="151.5" y="190.4449">alt</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="136.5" x2="1027" y1="421.314" y2="421.314"/><polygon fill="#181818" points="334.5,224.9599,324.5,228.9599,334.5,232.9599,330.5,228.9599" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="328.5" x2="500" y1="228.9599" y2="228.9599"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="340.5" y="223.1509">Logout</text><polygon fill="#181818" points="163.5,224.9599,153.5,228.9599,163.5,232.9599,159.5,228.9599" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="157.5" x2="322.5" y1="228.9599" y2="228.9599"/><polygon fill="#181818" points="311.5,398.314,321.5,402.314,311.5,406.314,315.5,402.314" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="152.5" x2="317.5" y1="402.314" y2="402.314"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="159.5" y="396.505">(HTTPS 302)</text><polygon fill="#181818" points="782.5,398.314,792.5,402.314,782.5,406.314,786.5,402.314" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="323.5" x2="788.5" y1="402.314" y2="402.314"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128" x="330.5" y="254.8569">RP-Initiated Logout</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="322" x="330.5" y="272.5629">HTTPS GET https://as/logout? (end_session_endpoint)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="330.5" y="290.2689">id_token_hint=eyJâ€¦ (OPTIONAL, id_token)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="330.5" y="307.975">&amp;logout_hint=â€¦ (OPTIONAL, login, e-mail, etc.)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="330.5" y="325.681">&amp;client_id=CID-XXXX (OPTIONAL)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319" x="330.5" y="343.387">&amp;post_logout_redirect_uri=https://client/post_logout</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="361" x="336.5" y="361.093">(OPTIONAL, must be registered in post_logout_redirect_uris)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="330.5" y="378.799">&amp;state=LOS-XXXX (OPTIONAL)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="330.5" y="396.505">&amp;ui_locales=fr-Fr+en-US</text><polygon fill="#181818" points="999,398.314,1009,402.314,999,406.314,1003,402.314" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="794.5" x2="1005" y1="402.314" y2="402.314"/><polygon fill="#181818" points="311.5,589.6682,321.5,593.6682,311.5,597.6682,315.5,593.6682" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="152.5" x2="317.5" y1="593.6682" y2="593.6682"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="159.5" y="587.8592">(HTTPS with HTML form)</text><polygon fill="#181818" points="782.5,589.6682,792.5,593.6682,782.5,597.6682,786.5,593.6682" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="323.5" x2="788.5" y1="593.6682" y2="593.6682"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128" x="330.5" y="446.2111">RP-Initiated Logout</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="444" x="330.5" y="463.9171">Redirection to POST https://as/logout (end_session_endpoint), urlencoded</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="330.5" y="481.6231">id_token_hint=eyJâ€¦ (OPTIONAL, id_token)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="330.5" y="499.3291">&amp;logout_hint=â€¦ (OPTIONAL, login, e-mail, etc.)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="330.5" y="517.0351">&amp;client_id=CID-XXXX (OPTIONAL)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319" x="330.5" y="534.7411">&amp;post_logout_redirect_uri=https://client/post_logout</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="361" x="336.5" y="552.4472">(OPTIONAL, must be registered in post_logout_redirect_uris)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="330.5" y="570.1532">&amp;state=LOS-XXXX (OPTIONAL)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="330.5" y="587.8592">&amp;ui_locales=fr-Fr+en-US</text><polygon fill="#181818" points="999,589.6682,1009,593.6682,999,597.6682,1003,593.6682" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="794.5" x2="1005" y1="593.6682" y2="593.6682"/><polygon fill="#181818" points="512,635.3742,502,639.3742,512,643.3742,508,639.3742" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="782.5,635.3742,792.5,639.3742,782.5,643.3742,786.5,639.3742" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="788.5" y1="639.3742" y2="639.3742"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="518" y="633.5652">Consent</text><polygon fill="#181818" points="805.5,635.3742,795.5,639.3742,805.5,643.3742,801.5,639.3742" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="999,635.3742,1009,639.3742,999,643.3742,1003,639.3742" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="799.5" x2="1005" y1="639.3742" y2="639.3742"/><polygon fill="#FEFFDD" points="961,652.3742,1061,652.3742,1071,664.3742,1061,677.3742,961,677.3742,951,664.3742,961,652.3742" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="963" y="670.2712">Remove session</text><path d="M136.5,687.0802 L237.5,687.0802 L237.5,696.7862 L227.5,706.7862 L136.5,706.7862 L136.5,687.0802 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="79.118" style="stroke:#000000;stroke-width:1.5;" width="890.5" x="136.5" y="687.0802"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="53" x="151.5" y="701.9772">par loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="123" x="252.5" y="700.8391">[for all relying parties]</text><polygon fill="#181818" points="163.5,754.1983,153.5,758.1983,163.5,762.1983,159.5,758.1983" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="157.5" x2="1010" y1="758.1983" y2="758.1983"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="169.5" y="734.6833">Notify logout (all)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332" x="169.5" y="752.3893">Either Front-Channel Logout, Back-Channel Logout, etc.</text><path d="M8,784.1983 L75,784.1983 L75,793.9043 L65,803.9043 L8,803.9043 L8,784.1983 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="114.8241" style="stroke:#000000;stroke-width:1.5;" width="1019" x="8" y="784.1983"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="23" y="799.0953">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="192" x="90" y="797.9572">[post_logout_redirect_uri supplied]</text><polygon fill="#181818" points="805.5,851.3163,795.5,855.3163,805.5,859.3163,801.5,855.3163" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="799.5" x2="1010" y1="855.3163" y2="855.3163"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="811.5" y="849.5073">(HTTPS 302)</text><polygon fill="#181818" points="334.5,851.3163,324.5,855.3163,334.5,859.3163,330.5,855.3163" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="328.5" x2="793.5" y1="855.3163" y2="855.3163"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="426" x="340.5" y="831.8013">Redirection to GET https://client/post_logout (post_logout_redirect_uri)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238" x="346.5" y="849.5073">?state=LOS-XXXX (if provided by the RP)</text><polygon fill="#181818" points="163.5,851.3163,153.5,855.3163,163.5,859.3163,159.5,855.3163" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="157.5" x2="322.5" y1="855.3163" y2="855.3163"/><polygon fill="#FEFFDD" points="39,868.3163,266,868.3163,276,880.3163,266,893.3163,39,893.3163,29,880.3163,39,868.3163" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="41" y="886.2133">Check state (protection against CSRF)</text><!--MD5=[4ce4ab220dce4b34943410e5b2c4fe15]
@startuml

!pragma teoz true

participant "Relying Party\n(OAuth Client)\nhttps://rp" as client
box
    participant "User Agent / Frontend\nfor Relying Party" as uac
    actor "User\n(OAuth Resource Owner)" as user
    participant "User Agent / Frontend for\nOpenID Provider" as uaas
end box
participant "OpenID Provider\n(OAuth Authorization Server)\nhttps://op" as as

note over as, uaas:Relevant OP Metadata\n"end_session_endpoint": "https://op/end_session",

& note over uac, client:Relevant RP Registration\n"post_logout_redirect_uris": ["https://client/post_logout"],

alt

user -> uac: Logout
& uac -> client

client -> uac: (HTTPS 302)

& uac -> uaas: **RP-Initiated Logout**\nHTTPS GET https://as/logout? (end_session_endpoint) \nid_token_hint=eyJâ€¦ (OPTIONAL, id_token)\n&logout_hint=â€¦ (OPTIONAL, login, e-mail, etc.)\n&client_id=CID-XXXX (OPTIONAL)\n&post_logout_redirect_uri=https://client/post_logout\n  (OPTIONAL, must be registered in post_logout_redirect_uris)\n&state=LOS-XXXX (OPTIONAL) \n&ui_locales=fr-Fr+en-US

& uaas -> as

else

client -> uac: (HTTPS with HTML form)

& uac -> uaas: **RP-Initiated Logout**\nRedirection to POST https://as/logout (end_session_endpoint), urlencoded \nid_token_hint=eyJâ€¦ (OPTIONAL, id_token)\n&logout_hint=â€¦ (OPTIONAL, login, e-mail, etc.)\n&client_id=CID-XXXX (OPTIONAL)\n&post_logout_redirect_uri=https://client/post_logout\n  (OPTIONAL, must be registered in post_logout_redirect_uris)\n&state=LOS-XXXX (OPTIONAL)\n&ui_locales=fr-Fr+en-US

& uaas -> as

end

user <-> uaas : Consent
& uaas <-> as

hnote over as: Remove session

group par loop [for all relying parties]
as -> client : Notify logout (all)\nEither Front-Channel Logout, Back-Channel Logout, etc.
end

opt post_logout_redirect_uri supplied

as -> uaas: (HTTPS 302)
&uaas -> uac: Redirection to GET https://client/post_logout (post_logout_redirect_uri)\n  ?state=LOS-XXXX (if provided by the RP)
&uac -> client

hnote over client: Check state (protection against CSRF)

end

@enduml

PlantUML version 1.2022.13(Sat Nov 19 14:22:17 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>